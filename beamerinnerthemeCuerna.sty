%%Beamer theme "Cuerna", version 1.0
%%Copyright Gubertino Cavalieri (mathsguy@bluesimplex.com)
%%October 2014. distributed under the GNU GPL Licence.

\mode<presentation>

%%This draws the background
\setbeamertemplate{background}{
    \begin{tikzpicture}[espiral/.style={thick,color=edgescolor}]
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \fill[color=edgescolor] (0,0) rectangle(\the\paperwidth, \the\paperheight);
      \fill[color=squarecolor] (0,0) rectangle(0.59\paperwidth, \the\paperheight);
      \draw[espiral] (0,0) .. controls +(up:0.5\paperheight) and (0.3\paperwidth,  \the\paperheight) .. (0.59\paperwidth,\the\paperheight);
      \fill[color=squarecolor] (0.60\paperwidth,0.41\paperheight) rectangle(\the\paperwidth, \the\paperheight);
      \draw[espiral] (0.60\paperwidth,\paperheight) .. controls +(right:0.3\paperwidth) and (\paperwidth, 0.61\paperheight) .. (\the\paperwidth, 0.41\paperheight);
      \fill[color=squarecolor] (0.77\paperwidth,0) rectangle(\the\paperwidth, 0.40\paperheight);
      \draw[espiral] (\paperwidth,0.4\paperheight) .. controls +(down:0.2\paperwidth) and (0.88\paperwidth, 0) .. (0.77\paperwidth, 0);
      \fill[color=squarecolor] (0.6\paperwidth,0) rectangle(0.76\paperwidth, 0.23\paperheight);
      \draw[espiral] (0.76\paperwidth,0) .. controls +(left:0.08\paperwidth) and (0.6\paperwidth, 0.12\paperheight) .. (0.6\paperwidth, 0.23\paperheight);
      \fill[color=squarecolor] (0.6\paperwidth, 0.24\paperheight) rectangle(0.69\paperwidth, 0.4\paperheight);
      \draw[espiral] (0.6\paperwidth,0.24\paperheight) .. controls +(up:0.08\paperheight) and (0.64\paperwidth, 0.4\paperheight) .. (0.69\paperwidth, 0.4\paperheight);
      \fill[color=squarecolor] (0.70\paperwidth, 0.31\paperheight) rectangle(0.76\paperwidth, 0.40\paperheight);
      \draw[espiral] (0.7\paperwidth,0.4\paperheight) .. controls +(right:0.03\paperheight) and (0.76\paperwidth, 0.35\paperheight) .. (0.76\paperwidth, 0.31\paperheight);
      \fill[color=squarecolor] (0.72\paperwidth, 0.24\paperheight) rectangle(0.76\paperwidth, 0.3\paperheight);
      \draw[espiral] (0.76\paperwidth,0.3\paperheight) .. controls +(down:0.03\paperheight) and (0.74\paperwidth, 0.24\paperheight) .. (0.72\paperwidth, 0.24\paperheight);
      \fill[color=squarecolor] (0.70\paperwidth, 0.24\paperheight) rectangle(0.71\paperwidth, 0.28\paperheight);
      \draw[espiral] (0.71\paperwidth,0.24\paperheight) .. controls +(left:0.005\paperwidth) and (0.7\paperwidth, 0.26\paperheight) .. (0.7\paperwidth, 0.28\paperheight);
      \ifnum\thepage>1\relax%
       \fill[white, opacity=1] (0,0) rectangle(\the\paperwidth, \the\paperheight);
       \includegraphics[width=\paperwidth, height=0.8\paperheight, angle=35]{images/fondo.pdf}
      \fi
    \end{tikzpicture}
}

\setbeamerfont{date}{size=\large, shape=\upshape}
\setbeamerfont{title}{size=\huge, shape=\mdseries}
\setbeamerfont{institute}{size=\tiny, shape=\itshape}

%%Creates the title page contents
\defbeamertemplate*{title page}{Cuerna}[1][]
{
  \begin{textblock}{9}(0.2,2.5)
    \begin{beamercolorbox}[center,sep=1pt,#1]{title page header}
      \usebeamerfont{title}\inserttitle\par%
    \end{beamercolorbox}
  \end{textblock}
  \vskip4.5cm%
  \begin{beamercolorbox}[wd=6cm,leftskip=0cm,#1]{author}
    \usebeamerfont{date}\insertauthor%
  \end{beamercolorbox}
  \vskip0.1cm%
  \begin{beamercolorbox}[wd=6cm, #1]{institute}
    \usebeamerfont{institute}\insertinstitute
  \end{beamercolorbox}

  
  \begin{textblock}{6}(9.3,5)
    \begin{beamercolorbox}[right]{date}
	\usebeamerfont{date}\insertdate%
    \end{beamercolorbox}
  \end{textblock}
  
  \begin{textblock}{4}(12.9,11.8)
    \insertlogo
  \end{textblock}
  \vfill
}

%Lists and the table of contents
\setbeamertemplate{items}[triangle]
\setbeamertemplate{sections/subsections in toc}[square]

\mode<all>
